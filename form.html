<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content ="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<title>Covid Tracker</title>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">Navbar</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="default.html">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link r-3" href="form.html">Form</a>
      </li>
      <li class="nav-item">
        <a class="nav-link r-3" href="map.html">Map</a>
      </li>
    </ul>
  </div>
</nav>

	<div class="container">
		<h2 id= "text-center">Enter Location: </h2>
		<form id="location-form">
			<input type="text" id="location-input" class="form-control form-control-lg">
			<br>
			<button type = "submit" class="btn btn-primary btn-block">Submit</button>
		</form>
		<div class = "card-block" id="formatted-address">
		</div>
		<div class = "card-block" id="address-components">
		</div>
		<div class="card-block" id="geometry">
		</div>
</div>
	<script>

		var locationForm = document.getElementById('location-form');

		locationForm.addEventListener('submit', geocode);

		//Call to geocode
		geocode();


		function geocode(e){

			e.preventDefault();

			var location = document.getElementById('location-input').value;
			axios.get('https://maps.googleapis.com/maps/api/geocode/json',{
				params:{
					address: location,
					key: 'AIzaSyBLpVjX_hmr5WXZjXooFP6bh21eUzrq8zw'
				}
			})
			.then((response) => {
				//log full response
				console.log(response);

				//formatted address
				var formattedAddress = response.data.results[0].formatted_address;
				var formattedAddressOutput = `
					<ul class="list-group">
						<li class="list-group-item">${formattedAddress}</li>
					</ul>`;

				//address components
				var addressComponents = response.data.results[0].address_components;
				var addressComponentsOutput = '<ul class="list-group">';
				for (var i = 0; i < addressComponents.length; i++){
					addressComponentsOutput += `
						<li class="list-group-item"><strong>${addressComponents[i].types[0]}</strong>: ${addressComponents[i].long_name}</li>
					`;
				}
				addressComponentsOutput += '</ul>';

				//geomety
				var lat = response.data.results[0].geometry.location.lat;
				var lng = response.data.results[0].geometry.location.lng;
				var geometryOutput = `
					<ul class="list-group">
						<li class="list-group-item"><strong>Latitude: </strong>${lat}</li>
						<li class="list-group-item"><strong>Longitude: </strong>${lng}</li>
					</ul>`;





				document.getElementById('formatted-address').innerHTML = formattedAddressOutput;
				document.getElementById('address-components').innerHTML = addressComponentsOutput;
				document.getElementById('geometry').innerHTML = geometryOutput;




			})
			.catch((error)=> {
				console.log(error);
			});
		}
	</script>





</body>
</html>
